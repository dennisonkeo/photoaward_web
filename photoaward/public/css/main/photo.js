
var w=window,d=document,e=d.documentElement,g=d.getElementsByTagName("body")[0],x=w.innerWidth||e.clientWidth||g.clientWidth,y=w.innerHeight||e.clientHeight||g.clientHeight;function getElementTopLeft(f){var a=document.getElementById(f);var c=0;var b=0;while(a.tagName!="BODY"){c+=a.offsetTop;b+=a.offsetLeft;a=a.offsetParent}return{top:c,left:b}}function calculateMaxSize(j,f,h,c){if(typeof c=="undefined"&&$("html").hasClass("mobile")){c=true}if(j.getAttribute("parental")!=null){return 606}if(c&&document.body.parentNode.classList.contains("mobile-ipad")){return calculateMaxSizeIpad(j,f,h,true)}var b=(f.originalWidth/f.originalHeight)*h+(y/6);var k=false;if(f.originalWidth<970&&f.originalHeight<650){b=f.originalWidth;k=true}else{if((f.originalWidth<1300&&f.originalHeight<700)&&x>1200){b=f.originalWidth}}if(b>1300){b=1300}if(Math.abs(f.originalHeight-f.originalWidth)<5){f.originalHeight=f.originalWidth}if(b>document.getElementById("photo-wrapper").offsetWidth||(c&&x>y)){var i=(f.originalHeight/f.originalWidth)*document.getElementById("photo-wrapper").offsetWidth;b=(f.originalWidth/f.originalHeight)*i;h=i}var a=(f.originalHeight/f.originalWidth)*b;if(f.rotate=="1"){b=(f.originalHeight/f.originalWidth)*a}else{if(f.originalHeight>f.originalWidth){b=(f.originalWidth/f.originalHeight)*a}}if(k){j.setAttribute("style","max-width:"+b+"px;width:100%; ")}else{if(f.rotate!=1&&b<937&&f.originalHeight<f.originalWidth){if(!c&&x<1200&&y<500){j.setAttribute("style","height:initial;width:auto;max-width:"+b+"px;")}if(!c&&y<700){j.setAttribute("style","height:initial;width:100%;max-width:"+b+"px;")}else{j.setAttribute("style","height:"+a+"px;max-height:1300px;")}}else{j.setAttribute("width",b);j.setAttribute("style","max-width:"+b+"px;width:auto;height:"+a+"px;max-height:1300px;")}}j.removeAttribute("height");return h}function replaceImage(b,h){if(typeof b=="undefined"&&$("html").hasClass("mobile")){b=true}if(typeof h=="undefined"){h=false}if(photo.adult==0||(photo.adult==1&&photo.user_adult==1)||h){if(!b){replaceImageDesktop();return}if(next_size!==""){var a=next_size;if(x<960){return}var f=document.getElementById("main_image").getAttribute("data-bupr");if(typeof f!="string"){f=""}var c=f+photo.file.replace(current_size,next_size);if(next_size==="_large.jpg"){if(x<1500){return}next_size="";return}else{next_size=""}var i=new Image();i.src=c;i.onload=function(){image.src=i.src;removeImageLazy()};i.onerror=function(){removeImageLazy()};current_size=a}}}var do_times=0;function replaceImageDesktop(){w=window,d=document,e=d.documentElement,g=d.getElementsByTagName("body")[0],x=w.innerWidth||e.clientWidth||g.clientWidth,y=w.innerHeight||e.clientHeight||g.clientHeight;if(do_times++>1){return}if(next_size!==""){var f="_large1300.jpg";var c=1200;if(x<460){return}else{if(x>c){next_size=f}else{if(x<960||do_times<2){next_size="_large.jpg"}}}var b=document.getElementById("main_image").getAttribute("data-bupr");if(typeof b!="string"){b=""}var a=b+photo.file.replace(base_size,next_size);if(next_size==="_large.jpg"||next_size==="_large1300.jpg"){next_size=f}else{next_size=""}var h=new Image();h.src=a;h.onload=function(){if(h.width>500){image.src=h.src;last_image_src=h.src;if(f==="_.jpg"){calculateMaxSize(image,photo,max_height)}base_size="_large.jpg";replaceImageDesktop()}else{if(h.src.indexOf(f)>0){var i=document.getElementById("main_image").getAttribute("data-bupr");if(typeof i!="string"){i=""}image.src=i+photo.file.replace(base_size,"_large.jpg")}}removeImageLazy()};h.onerror=function(){removeImageLazy();var i=document.getElementById("main_image").getAttribute("data-bupr");if(typeof i!="string"){i=""}image.src=i+photo.file.replace(base_size,"_large.jpg")}}}window.addEventListener("orientationchange",function(){var a=calculateMaxSize(image,photo,a,true)},false);function calculateMaxSizeIpad(c,a,j,f){w=window;d=document;e=d.documentElement;g=d.getElementsByTagName("body")[0];x=w.innerWidth||e.clientWidth||g.clientWidth;y=w.innerHeight||e.clientHeight||g.clientHeight;var h=getElementTopLeft("main_image");var m=h.top;var k=y-m;var i=980;var l=(k<i)?k:i;if(Math.abs(window.orientation)!=90){if(a.originalHeight/a.originalWidth>0.7&&a.originalHeight/a.originalWidth<1){i=550}else{if(a.originalHeight/a.originalWidth>1){i=750}}var b=(a.originalHeight/a.originalWidth)*680;if(b>i){b=i}new_width=(a.originalWidth/a.originalHeight)*b;j=b}else{i=880;if(a.originalHeight/a.originalWidth>0.7&&a.originalHeight/a.originalWidth<1){i=450}else{if(a.originalHeight/a.originalWidth>1){i=650}}var b=(a.originalHeight/a.originalWidth)*680;if(b>i){b=i}new_width=(a.originalWidth/a.originalHeight)*b;j=b}c.setAttribute("width",new_width);c.setAttribute("style","max-width:"+new_width+"px;width:"+new_width+"px;max-height:auto;");c.removeAttribute("height");return j}if(typeof removeImageLazy!="function"){function removeImageLazy(){if(typeof($)=="undefined"||typeof(jQuery)=="undefined"){return}var a=$(".lazy");a.each(function(b){$(this).fadeTo(500,1);var f=$(this).attr("data-src");if(typeof f!="undefined"&&f.length>0){if($(this).attr("data-waittocomplete")==="true"){var h=new Image();h.src=f;$(this).removeClass("lazy");$(this).removeAttr("data-src");$(this).removeAttr("data-waittocomplete");var c=this;h.onload=function(){if($(c).hasClass("delayed")){$(c).attr("src",f)}$(c).removeClass("delayed")};h.onerror=function(){removeImageLazy()};return}if($(this).attr("data-nodelayedyet")=="true"){return}$(this).attr("src",f);$(this).attr("data-src","");$(this).removeAttr("data-src");$(this).removeClass("lazy");if($("body").hasClass("photopage")){$(this).removeAttr("height")}}})}}var ipdril=null;function delayRemoveImageLazy(){clearTimeout(ipdril);removeImageLazy()}ipdril=setTimeout(delayRemoveImageLazy,4000);